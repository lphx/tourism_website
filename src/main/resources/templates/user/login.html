<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>登录页面</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="../user/css/style.default.css" id="theme-stylesheet">
  </head>
  <body>
    <div class="page login-page">
      <div class="container d-flex align-items-center">
        <div class="form-holder has-shadow">
          <div class="row">
            <!-- Logo & Information Panel-->
            <div class="col-lg-6">
              <div class="info d-flex align-items-center">
                <div class="content">
                  <div class="logo">
                    <h1>欢迎登录</h1>
                  </div>
                  <p>旅游网站登录</p>
                </div>
              </div>
            </div>
            <!-- Form Panel    -->
            <div class="col-lg-6 bg-white">
              <div class="form d-flex align-items-center">
                <div class="content">
                  <form method="post" action="/user/find" class="form-validate" id="loginFrom">
                    <div id="error" style="display:none"><font color="red">账号或者密码错误</font></div>
                    <div class="form-group">
                      <input id="username" type="text" name="username" required data-msg="请输入用户名" placeholder="用户名"  class="input-material">
                    </div>
                    <div class="form-group">
                      <input id="password" type="password" name="password" required data-msg="请输入密码" placeholder="密码" class="input-material">
                    </div>
                    <button id="submitAdd" type="button" class="btn btn-primary">登录</button>

                  </form>
                  <br />
                  <small>没有账号?</small><a href="/register" class="signup">&nbsp;注册</a>
                  <br />
                  <small></small><a href="/change" class="signup">&nbsp;忘记密码？</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- JavaScript files-->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js" charset="utf-8"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


    <script>

      $("#submitAdd").click(function(){

        var data = $("#loginFrom").serialize();
        $.ajax({
          type:'post',
          url:'user/findByUsernameAndPassword',
          cache: false,
          data:data,  //重点必须为一个变量如：data
          dataType:'json',
          success:function(data){
            if(data.code==500){
              $("#error").css('display','block');
            }
            if(data.code==200){
              window.location.href = "/"
            }
          },
          error:function(){
            alert("请求失败")
          }
        })

      })

    </script>
  </body>
</html>